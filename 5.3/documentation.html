<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->  
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->  
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->  
<head>
    <title>Laravel Boilerplate | Documentation</title>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">    
    <link rel="shortcut icon" href="../favicon.ico">  
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!-- Global CSS -->
    <link rel="stylesheet" href="../assets/plugins/bootstrap/css/bootstrap.min.css">   
    <!-- Plugins CSS -->    
    <link rel="stylesheet" href="../assets/plugins/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="../assets/plugins/prism/prism.css">
    <link rel="stylesheet" href="../assets/plugins/lightbox/dist/ekko-lightbox.min.css">
    <link rel="stylesheet" href="../assets/plugins/elegant_font/css/style.css">

    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="../assets/css/styles.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
</head> 

<body class="body-pink">
    <div class="page-wrapper">
        <!-- ******Header****** -->
        <header id="header" class="header">
            <div class="container">
                <div class="branding">
                    <h1 class="logo">
                        <a href="../../index.html">
                            <span aria-hidden="true" class="icon_documents_alt icon"></span>
                            <span class="text-highlight">Laravel</span><span class="text-bold">Boilerplate</span>
                        </a>
                    </h1>
                </div><!--//branding-->
                <ol class="breadcrumb">
                    <li><a href="../../index.html">Home</a></li>
                    <li class="active">Documentation</li>
                </ol>
            </div><!--//container-->
        </header><!--//header-->
        <div class="doc-wrapper">
            <div class="container">
                <div id="doc-header" class="doc-header text-center">
                    <h1 class="doc-title"><span aria-hidden="true" class="icon icon_puzzle_alt"></span> Documentation</h1>
                    <div class="meta"><i class="fa fa-clock-o"></i> Last updated: December 10th, 2016</div>
                </div><!--//doc-header-->
                <div class="doc-body">
                    <div class="doc-content">
                        <div class="content-inner">
                            <section id="events" class="doc-section">
                                <h2 class="section-title">Events</h2>
                                <div class="section-block">
                                    <p>There are many events that are fired throughout the applications lifecycle if they meet the requirements.</p>

                                    <p>A current list of events fired are:</p>

                                    <p><strong>Frontend</strong></p>
                                    <ul>
                                        <li>UserConfirmed</li>
                                        <li>UserLoggedIn</li>
                                        <li>UserLoggedOut</li>
                                        <li>UserRegistered</li>
                                    </ul>

                                    <p><strong>Backend</strong></p>
                                    <ul>
                                        <li>UserCreated</li>
                                        <li>UserDeactivated</li>
                                        <li>UserDeleted</li>
                                        <li>UserPasswordChanged</li>
                                        <li>UserPermanentlyDeleted</li>
                                        <li>UserReactivated</li>
                                        <li>UserRestored</li>
                                        <li>UserUpdated</li>
                                        <li>RoleCreated</li>
                                        <li>RoleDeleted</li>
                                        <li>RoleUpdated</li>
                                    </ul>

                                    <p>The event stubs are found in the <strong>app\Events</strong> directory and are registered in the <a href="#providers">EventServiceProvider</a> using the <a href="https://laravel.com/docs/master/events#event-subscribers" target="_blank">Event Subscriber</a> feature of Laravel.</p>

                                    <p>The event listeners are found in the <strong>app\Listeners</strong> directory.</p>

                                    <div id="frontend-subscribers" class="section-block">
                                        <h3 class="block-title">Frontend Subscribers</h3>
                                        <p>Currently, all the frontend subscriber events do is log when the user performs the event being fired. This is meant to be extended by you to do whatever you want.</p>
                                    </div><!--frontend-subscribers-->

                                    <div id="backend-subscribers" class="section-block">
                                        <h3 class="block-title">Backend Subscribers</h3>
                                        <p>If you take a look at the backend subscribers, each item utilizes the <a href="#helpers">history helper</a> to log a row into the <a href="#history-management">history table</a> when that event is fired.</p>

                                        <div class="code-block">
                                            <h6>Code Example</h6>
                                            <pre><code class="language-php">public function onCreated($event) {
    history()->log(
        $this->history_slug,
        'trans("history.backend.users.created") '.$event->user->name,
        $event->user->id,
        'plus',
        'bg-green'
    );
}</code></pre>
                                        </div><!--//code-block-->
                                    </div><!--backend-subscribers-->

                                    <p>The events are fired using the Laravel <strong>event()</strong> helper throughout the application. <a href="https://github.com/rappasoft/laravel-5-boilerplate/blob/master/app/Http/Controllers/Frontend/Auth/LoginController.php#L65" target="_blank">Example</a>.</p>

                                    <p>When the event helper is called with the event class, the objects needed to process the event are passed through, which are caught in the constructor of the Event classes themselves, and passed through to the listener as a property on the $event variable. (This is default Laravel behavior and not specific to this application).</p>
                                </div><!--//section-block-->
                            </section><!--//doc-section-->     

                            <section id="exceptions" class="doc-section">
                                <h2 class="section-title">Exceptions</h2>
                                <div class="section-block">
                                    <p>Besides the default PHP Exception class, there is one custom exception that gets thrown called <strong>GeneralException</strong>.</p>

                                    <p>This exception does nothing special except act as a way to change the default exception functionality when calling it.</p>

                                    <p>Any custom exceptions live in the <strong>app\Exceptions</strong> directory.</p>

                                    <p>You can see it in action in the <a
                                            href="https://github.com/rappasoft/laravel-5-boilerplate/blob/master/app/Exceptions/Handler.php#L67" target="_blank">Exception Handler</a> class here.</p>

                                    <p>Anytime you throw this exception, it will not display a "Whoops" error. Instead, it will take the error into a session variable and redirect the user to the previous page and display the message in a bootstrap danger alert box.</p>

                                    <p>If a regular PHP Exception is thrown, it will still get caught and the default functionality will takeover.</p>

                                    <p>Example order of events would be:</p>

                                    <ol>
                                        <li>User tries to delete the administrator account.</li>
                                        <li>Repository says this is not allowed and throws a GeneralException with the text explaining the reason.</li>
                                        <li>The Handler class catches the exception and redirects the user back with old input.</li>
                                        <li>A session variable called flash_danger is set with the exception text.</li>
                                        <li>The page is rendered and a file called <a href="#flash-messages">messages.blade.php</a> checks for this session variable, and displays the proper bootstrap alert with the provided text.</li>   
                                    </ol>

                                    <p><strong>Note:</strong> The <strong>withFlashDanger($text)</strong> is some Laravel magic that is parsed into <strong>with('flash_danger', $text)</strong>. This functionality exists in many places around the Laravel Framework.</p>

                                    <p><strong>Note:</strong> In the case of the request classes, the default functionality when validation fails is to redirect back with errors:</p>

                                    <p><a href="https://laravel.com/docs/master/validation#creating-form-requests" target="_blank">From the Laravel Documentation:</a></p>

                                    <p><em>"If validation fails, a redirect response will be generated to send the user back to their previous location. The errors will also be flashed to the session so they are available for display. If the request was an AJAX request, a HTTP response with a 422 status code will be returned to the user including a JSON representation of the validation errors."</em></p>
                                </div><!--//section-block-->
                            </section><!--//doc-section-->    

                            <section id="breadcrumbs" class="doc-section">
                                <h2 class="section-title">Breadcrumbs</h2>
                                <div class="section-block">
                                    <p>The breadcrumb links in the backend are managed by the <a href="http://github.com/davejamesmiller/laravel-breadcrumbs" target="_blank">davejamesmiller/laravel-breadcrumbs</a> package.</p>

                                    <p>The parts to this package integrated are:</p>

                                    <ul>
                                        <li>The <strong>config\breadcrumbs.php</strong> file which tells the system which view file to use for the rendering.</li>
                                        <li>The <strong>views\backend\includes\partials\breadcrumbs.blade.php</strong> file which renders the links.</li>
                                        <li><a
                                                href="https://github.com/rappasoft/laravel-5-boilerplate/blob/master/resources/views/backend/layouts/app.blade.php#L57" target="_blank">The call</a> to render the breadcrumbs.</li>
                                        <li>The breadcrumb files located in <strong>app\Http\Breadcrumbs</strong>.</li>
                                        <li>The <strong>app\Http\breadcrumbs.php</strong> file that the plugin looks for to render the links.</li>
                                    </ul>

                                    <p>Whenever you add new routes to your project, you must add breadcrumb files to go along with them to have them rendered, it is not automatic. Use the existing files for reference.</p>

                                    <p><strong>Note:</strong> If you want the system to throw errors when a breadcrumb doesn't exist for a given route, than change <a href="https://github.com/rappasoft/laravel-5-boilerplate/blob/master/resources/views/backend/layouts/app.blade.php#L58" target="_blank">this line</a> from:</p>

                                    <div class="code-block">
                                        <pre><code class="language-php">{!! Breadcrumbs::renderIfExists() !!}</code></pre>
                                    </div><!--//code-block-->

                                    <p>to:</p>

                                    <div class="code-block">
                                        <pre><code class="language-php">{!! Breadcrumbs::render() !!}</code></pre>
                                    </div><!--//code-block-->
                                </div><!--//section-block-->
                            </section><!--//doc-section-->    

                            <section id="composers" class="doc-section">
                                <h2 class="section-title">Composers</h2>
                                <div class="section-block">
                                    <p>The <strong>app\Http\Composers</strong> directory holds all <a href="https://laravel.com/docs/5.3/views#view-composers" target="_blank">view composers</a>.</p>

                                    <p>There is currently one composer that ships with the project called <strong>GlobalComposer</strong>, and as you may have guessed, any variables bound in this class will be available to all views throughout the application both front and backend.</p>

                                    <p>The composer classes themselves are registered in the <strong>app\Providers\ComposerServiceProvider</strong> class.</p>

                                    <p>The <strong>GlobalComposer</strong> binds the variable <strong>$logged_in_user</strong> to every view.</p>

                                    <p>If the user is logged in, it will be an <strong>app\Models\Access\User\User</strong> object, if they are not it will be <strong>false</strong>.</p>
                                </div><!--//section-block-->
                            </section><!--//doc-section-->    

                            <section id="routes" class="doc-section">
                                <h2 class="section-title">Routes</h2>
                                <div class="section-block">
                                    <p>You should also read the <a href="#access-control">Access Control</a> section to fully understand the routes in this package.</p>

                                    <p>The only stock route file modified is <strong>routes\web.php</strong></p>

                                    <p>Lets look at <strong>web.php</strong>, line by line:</p>

                                    <div class="code-block">
                                        <pre><code class="language-php">Route::get('lang/{lang}', 'LanguageController@swap');</code></pre>
                                    </div><!--//code-block-->

                                    <p>The first line gets envoked anytime the user chooses a language from the language picker dropdown. The LanguageController's swap method switches the language code in the session and refreshes the page for it to take effect.</p>

                                    <hr/>

                                    <div class="code-block">
                                        <pre><code class="language-php">Route::group(['namespace' => 'Frontend', 'as' => 'frontend.'], function () {
    includeRouteFiles(__DIR__ . '/Frontend/');
});</code></pre>
                                    </div><!--//code-block-->

                                    <p>This section registers all of the frontend routes, such as login, register, etc.</p>

                                    <p><strong>Key Points:</strong></p>

                                    <ul>
                                        <li><strong>The namespaces of the routes indicate the folder structure.</strong> In the above case the routes that will be included live in <strong>routes\Frontend</strong>.</li>
                                        <li>The <strong>as</strong> property prepends the value to all routes inside
                                            the closure, so in the above case all included route names will be prepended with <strong>frontend.</strong>.</li>
                                        <li>The <strong>includeRouteFiles()</strong> is a helper function located in <strong>app\helpers.php</strong> and autoloaded by composer. (Learn about the <a href="#helpers">helpers here</a>). This takes all files in the specified directory and includes them in the closure so you can add new routes without having to touch the <strong>web.php</strong> routes file.</li>
                                    </ul>

                                    <hr/>

                                    <div class="code-block">
                                        <pre><code class="language-php">Route::group(['namespace' => 'Backend', 'prefix' => 'admin', 'as' => 'admin.', 'middleware' => 'admin'], function () {
    includeRouteFiles(__DIR__ . '/Backend/');
});</code></pre>
                                     </div><!--//code-block-->
                                </div><!--//section-block-->

                                <p>This section registers all of the backend routes, such as admin dashboard, user management, etc.</p>

                                <p>It is nearly identical as the frontend routes with the addition of the <strong>admin middleware and prefix</strong>.</p>

                                <p><strong>Key Points:</strong></p>

                                <ul>
                                    <li><strong>The namespaces of the routes indicate the folder structure.</strong> In the above case the routes that will be included live in <strong>routes\Backend</strong>.</li>
                                    <li>The <strong>as</strong> property prepends the value to all routes inside the
                                        closure, so in the above case all included route names will be prepended with <strong>admin.</strong>.</li>
                                    <li>The <strong>prefix</strong> property prepends the value before all of the URL's of the routes inside the closure, so in the above case all route URL's will be prepended with <strong>admin/</strong>.</li>
                                    <li>The <strong>includeRouteFiles()</strong> is a helper function located in <strong>app\helpers.php</strong> and autoloaded by composer. (Learn about the <a href="#helpers">helpers here</a>). This takes all files in the specified directory and includes them in the closure so you can add new routes without having to touch the <strong>web.php</strong> routes file.</li>
                                    <li>The <strong>admin</strong> middleware is specified in <strong>app\Http\Kernel.php</strong> and states that anyone trying to access the routes in the following closure must:
                                        <ul>
                                            <li>Be logged in</li>
                                            <li>Have the <strong>view-backend</strong> permission associated with one of their roles.</li>
                                            <li>Be subject to getting logged out after a set amount of time (timeout middleware), if enabled.</li>
                                        </ul>
                                    </li>
                                </ul>

                                <p><strong>Note:</strong> Administrator has all permissions so you do not have to specify the administrator role everywhere.</p>

                                <p><strong>Note: Most route resources use Laravel's <a href="https://laravel.com/docs/master/routing#route-model-binding" target="_blank">Route/Model Binding</a> which you will see as well in the controller methods.</strong>

                                <p>For more information about the <strong>access.routeNeedsPermission</strong> middleware included in the <strong>admin</strong> middleware, see <a href="#middleware">middleware</a> and <a href="#access-control">Access Control</a>.
                            </section><!--//doc-section-->  

                            <section id="controllers" class="doc-section">
                                <h2 class="section-title">Controllers</h2>
                                <div class="section-block">
                                    <p>All of the controllers live in the default Laravel controller location of <strong>app\Http\Controllers</strong> and follow a namespacing convention of the folders they're in.</p>

                                    <p>The controllers are very clean, so there is not much to say, some key points and different sections to read about are:</p>

                                    <ul>
                                        <li>All controller methods use injected <a href="#requests">Request Classes</a> to both validate and act as a second security check after the middleware.</li>
                                        <li>All database logic is extracted out to <a href="#repositories">Repositories</a>.</li>
                                        <li>Controllers are only comprised of CRUD methods, any other methods have been extracted to other controllers for cleanliness.</li>
                                        <li>Any data table has its own dedicated controller.</li>
                                        <li>Any data being bound or returned to views are using Laravel <a
                                                href="#magic-methods">magic</a> with() method just like elsewhere in the application.
                                            <ul>
                                                <li>Example: <strong>withUser($user)</strong> is converted to <strong>with('user', $user)</strong></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div><!--//section-block-->
                            </section><!--//doc-section-->    

                            <section id="middleware" class="doc-section">
                                <h2 class="section-title">Middleware</h2>
                                <div class="section-block">
                                    <p>Laravel Boilerplate ships with 4 additional middleware out of the box.</p>

                                    <ul>
                                        <li><a class="scrollto" href="#localization-middleware">LocaleMiddleware</a></li>
                                        <li><a class="scrollto" href="#routeNeedsRole">RouteNeedsRole</a></li>
                                        <li><a class="scrollto" href="#routeNeedsPermission">RouteNeedsPermission</a></li>
                                        <li><a class="scrollto" href="#session-timeout">SessionTimeout</a></li>
                                    </ul>

                                    <p>There is also one extra middleware group:</p>

                                    <ul>
                                        <li><a href="#middleware-groups">Middleware Groups</a></li>
                                    </ul>

                                    <div id="localization-middleware" class="section-block">
                                        <h3 class="block-title">LocaleMiddleware</h3>
                                        <p>The LocaleMiddleware is appended to the web middleware stack and runs on each request.</p>

                                        <p>It takes care of:</p>

                                        <ul>
                                            <li>Checking to see if localization is turned on in the config file.</li>
                                            <li>Setting the session locale code.</li>
                                            <li>Setting the PHP locale code.</li>
                                            <li>Setting the Carbon library locale code.</li>
                                            <li>Checking to see if the required language is a "Right-to-Left" language and sets a session variable to be used elsewhere in the system.</li>
                                        </ul>
                                    </div><!--//section-block-->

                                    <div id="routeNeedsRole" class="section-block">
                                        <h3 class="block-title">RouteNeedsRole</h3>
                                        <p>The RouteNeedsRole middleware is a route middleware and is called as <strong>access.routeNeedsRole</strong> and takes 2 parameters:</p>

                                        <ul>
                                            <li>The role or roles</li>
                                            <li>A boolen stating whether or not the request needs all of the roles (if multiple were supplied)</li>
                                        </ul>

                                        <p>See examples of use under <a href="#access-control">Access Control</a>.
                                    </div><!--//section-block-->

                                    <div id="routeNeedsPermission" class="section-block">
                                        <h3 class="block-title">RouteNeedsPermission</h3>
                                        <p>The RouteNeedsPermission middleware is a route middleware and is called as <strong>access.routeNeedsPermission</strong> and takes 2 parameters:</p>

                                        <ul>
                                            <li>The permission or permissions</li>
                                            <li>A boolen stating whether or not the request needs all of the permissions (if multiple were supplied)</li>
                                        </ul>

                                        <p>See examples of use under <a href="#access-control">Access Control</a>.
                                    </div><!--//section-block-->

                                    <div id="session-timeout" class="section-block">
                                        <h3 class="block-title">SessionTimeout</h3>
                                        <p>SessionTimeout middleware is a tool used on the admin middleware stack (though can be used globally) that logs the user out after a set period of time for security purposes.</p>

                                        <p>It is enabled by default with a 5 minute timeout.</p>

                                        <p>There are 2 environment variables you can set:</p>

                                        <div class="code-block">
                                            <p><code>
                                                SESSION_TIMEOUT_STATUS=true<br/>
                                                SESSION_TIMEOUT=600
                                            </code></p>
                                        </div><!--//code-block-->

                                        <p>If the environment variables are not set, it will fallback to the defaults set in <strong>app\config\misc.php</strong>.</p>

                                        <p>As stated above this middleware is included by default in the <a href="#middleware-groups">admin middleware group</a> but can be removed. Though it is more suggested to just turn it off.</p>
                                    </div><!--//section-block-->

                                    <div id="middleware-groups" class="section-block">
                                        <h3 class="block-title">Middleware Groups</h3>
                                        <p>Laravel Boilerplate currently ships with one additional middleware group called <strong>admin</strong>.</p>

                                        <p>The <strong>admin</strong> middleware is specified in <strong>app\Http\Kernel.php</strong> and states that anyone trying to access the routes in the following closure must:</p>

                                        <ul>
                                            <li>Be logged in</li>
                                            <li>Have the <strong>view-backend</strong> permission associated with one of their roles.</li>
                                            <li>Be subject to getting logged out after a set amount of time (timeout middleware), if enabled.</li>
                                        </ul>

                                        <p>It currently wraps all backend routes by default.</p>

                                        <p><strong>Note:</strong> If you remove the admin middleware from the backend routes, anyone will be able to access the backend unless you specify elsewhere.</p>
                                    </div><!--//section-block-->
                                </div><!--//section-block-->
                            </section><!--//doc-section-->        

                            <section id="requests" class="doc-section">
                                <h2 class="section-title">Requests</h2>
                                <div class="section-block">
                                    <p>Any controller method throught the application that either needs validation or a security check, will have its own injected Request class.</p>

                                    <p>App requests are stored in the <strong>app\Http\Request</strong> folder and their namespaces match the folder structure.</p>

                                    <div id="example-request" class="section-block">
                                        <h3 class="block-title">Example Request</h3>

                                        <p>We are going to look at the <strong>store</strong> method of the <strong>app\Http\Controllers\Backend\Access\User\UserController</strong> to see what's going on.</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">public function store(StoreUserRequest $request)
{
    $this->users->create(['data' => $request->except('assignees_roles'), 'roles' => $request->only('assignees_roles')]);
    return redirect()->route('admin.access.user.index')->withFlashSuccess(trans('alerts.backend.users.created'));
}</code></pre>
                                        </div><!--//code-block-->

                                        <p>Disregard what's inside the method and instead look at the parameter list.</p>

                                        <p>The StoreUserRequest is being injected to the controller, you do not have to do anything as it is parsed by Laravel automatically, and before the code inside the method even runs.</p>

                                        <p>The request itself looks like this:</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">class StoreUserRequest extends Request
{

    public function authorize()
    {
        return access()->allow('manage-users');
    }

    public function rules()
    {
        return [
            'name'     => 'required|max:255',
            'email'    =>  ['required', 'email', 'max:255', Rule::unique('users')],
            'password' => 'required|min:6|confirmed',
        ];
    }
}</code></pre>
                                        </div><!--//code-block-->

                                        <p>As you can see it does two things:</p>

                                        <ul>
                                            <li>It authorizes the user against the given permission.</li>
                                            <li>It validates the incoming request.</li>
                                        </ul>

                                        <p>If the authorization fails the user will be redirected back with a message stating they do not have the required permissions.</p>

                                        <p>If the validation fails the default Laravel functionality takes over which is:</p>

                                        <p><em>
                                            "If validation fails, a redirect response will be generated to send the user back to their previous location. The errors will also be flashed to the session so they are available for display. If the request was an AJAX request, a HTTP response with a 422 status code will be returned to the user including a JSON representation of the validation errors."
                                        </em></p>
                                    </div><!--//section-block-->

                                    <p>Any controller method that needs to validate data or permission should use a request class for an extra layer of security.</p>

                                    <hr />

                                    <p><strong>Note:</strong> This project uses more general permissions for CRUD operations, meaning the default requests for a <strong>manage-users</strong> permission would be:</p>

                                    <ul>
                                        <li>ManageUserRequest - for any requests that do not have validation but want to assure the user can <strong>manage-users</strong></li>
                                        <li>StoreUserRequest - for creating a user and assuring the user can <strong>manage-users</strong></li>
                                        <li>UpdateUserRequest - for updating a user and assuring the user can <strong>manage-users</strong></li>
                                    </ul>

                                    <p>If you were to get more granular, and have separate permissions for all stages of CRUD, you may have controller methods that are injecting the following request classes:</p>

                                    <ul>
                                        <li>ViewUserRequest - access()->can('view-users')</li>
                                        <li>StoreUserRequest - access()->can('store-users')</li>
                                        <li>EditUserRequest - access()->can('edit-users')</li>
                                        <li>UpdateUserRequest - access()->can('update-users')</li>
                                        <li>DeleteUserRequest - access()->can('delete-users')</li>
                                    </ul>

                                    <hr />

                                    <p>Learn more about Laravel request classes <a href="https://laravel.com/docs/5.3/validation#form-request-validation" target="_blank">here</a>.</p>
                                </div><!--//section-block-->
                            </section><!--//doc-section-->    

                            <section id="models" class="doc-section">
                                <h2 class="section-title">Models</h2>
                                <div class="section-block">
                                    <p>Models in Laravel Boilerplate live in the <strong>app\Models</strong> directory instead of the root for organizational purposes.</p>

                                    <p>The folder structure of the Model indicates its namespace as always.</p>

                                    <p>The majority of the models share the same characteristics:</p>

                                    <ul>
                                        <li>The <strong>$table</strong> property houses the table name, whether static or pulling from a config file.</li>
                                        <li>The <strong>$fillable</strong> property defines the columns that can be mass assigned. This is preferred over guarded as it is more specific.</li>
                                        <li>Some models have a <strong>$hidden</strong> property to hide certain information from being displayed, in such ways as in an API.</li>
                                        <li>Some models have a <strong>$dates</strong> property to cast certain columns as Carbon objects, such as when using the Laravel SoftDeletes trait.</li>
                                        <li>Many models have traits that extend or include other functionality, see below.</li>
                                    </ul>

                                    <div id="model-attributes" class="section-block">
                                        <h3 class="block-title">Attributes</h3>
                                        
                                        <p>If a model has any custom attributes, they are held as traits in an Attributes folder of the current model directory.</p>

                                        <p>This is also where the system builds the action buttons for each object type, if applicable. <a href="#action-buttons">See Action Buttons</a>.
                                    </div><!--//section-block-->

                                    <div id="model-relationships" class="section-block">
                                        <h3 class="block-title">Relationships</h3>
                                        
                                        <p>If a model has any relationships, they are held as traits in an Relationships folder of the current model directory.</p>
                                    </div><!--//section-block-->

                                    <div id="model-scopes" class="section-block">
                                        <h3 class="block-title">Scopes</h3>
                                        
                                        <p>If a model has any scopes, they are held as traits in an Scopes folder of the current model directory.</p>
                                    </div><!--//section-block-->
                                </div><!--//section-block-->
                            </section><!--//doc-section-->       

                            <section id="notifications" class="doc-section">
                                <h2 class="section-title">Notifications</h2>
                                <div class="section-block">
                                    <p>Laravel Boilerplate ships with a few Models that utilize the <strong>Notifiable</strong> trait, and in turn there are a few notifications that get sent.</p>

                                    <ul>
                                        <li>UserNeedsConfirmation - Send when a user registers and email confirmation is on.</li>
                                        <li>UserNeedsPasswordReset- Send when the user requests a password reset.</li>
                                    </ul>

                                    <p>All notifications are stored in the <strong>app\Notifications</strong> directory by default.</p>

                                    <p>All notifications are self-explanatory, for more information view the <a href="https://laravel.com/docs/master/notifications" target="_blank">Laravel Documentation</a>.</p>
                                </div><!--//section-block-->
                            </section><!--//doc-section-->    

                            <section id="providers" class="doc-section">
                                <h2 class="section-title">Providers</h2>
                                <div class="section-block">
                                    <p>Service Providers are classes that sort of "bootstrap" your application. Laravel ships with many, there are some new ones, and some default ones have been modified.</p>

                                    <ul>
                                        <li><a class="scrollto" href="#AccessServiceProvider">AccessServiceProvider</a> - New</li>
                                        <li><a class="scrollto" href="#AppServiceProvider">AppServiceProvider</a> - Modified</li>
                                        <li>AuthServiceProvider - Untouched</li>
                                        <li><a class="scrollto" href="#BladeServiceProvider">BladeServiceProvider</a> - New</li>
                                        <li>BroadcastServiceProvider - Untouched</li>
                                        <li><a class="scrollto" href="#ComposerServiceProvider">ComposerServiceProvider</a> - New</li>
                                        <li><a class="scrollto" href="#EventServiceProvider">EventServiceProvider</a> - Modified</li>
                                        <li><a class="scrollto" href="#HistoryServiceProvider">HistoryServiceProvider</a> - New</li>
                                        <li><a class="scrollto" href="#MacroServiceProvider">MacroServiceProvider</a> - New</li>
                                        <li><a class="scrollto" href="#RouteServiceProvider">RouteServiceProvider</a> - Modified</li>
                                    </ul>

                                    <div id="AccessServiceProvider" class="section-block">
                                        <h3 class="block-title">AccessServiceProvider</h3>
                                        
                                        <p>The AccessServiceProvider bootstraps the services for the access control system. Specifically:</p>

                                        <ul>
                                            <li>Autoloads the Access facade so it does not need to be included in config\app.php</li>
                                            <li>Registers the access blade extensions.</li>
                                        </ul>

                                        <p>This file shouldn't need to be modified out of the box.</p>
                                    </div><!--//section-block-->

                                    <div id="AppServiceProvider" class="section-block">
                                        <h3 class="block-title">AppServiceProvider</h3>
                                        
                                        <p>The following modifications have been made to the default AppServiceProvider:</p>

                                        <ul>
                                            <li>The boot method does the same checks as the <a href="#localization-middleware">LocalizationMiddleware</a> class.</li>
                                            <li>There is a conditional to check to see if the app is in production if
                                                you need to do anything specific such as force https.</li>
                                            <li>The register method has a conditional for local development where you can register service providers that you only need for local development, since there is no point in registering them in a production environment.</li>
                                        </ul>
                                    </div><!--//section-block-->

                                    <div id="BladeServiceProvider" class="section-block">
                                        <h3 class="block-title">BladeServiceProvider</h3>
                                        
                                        <p>The BladeServiceProvider registers any custom blade directives you want to be able to use in your blade files.</p>

                                        <p>Laravel Boilerplate ships with 1 non-access related blade extensions:</p>

                                        <ul>
                                            <li>A <strong>@langRTL</strong> directive, which checks to see if the current language in the session wants Right-to-Left support so you can update things accordingly.</li>
                                        </ul>
                                    </div><!--//section-block-->

                                    <div id="ComposerServiceProvider" class="section-block">
                                        <h3 class="block-title">ComposerServiceProvider</h3>
                                        
                                        <p>The ComposerServiceProvider registers any view composers the application needs.</p>
                                    </div><!--//section-block-->

                                    <div id="EventServiceProvider" class="section-block">
                                        <h3 class="block-title">EventServiceProvider</h3>
                                        
                                        <p>The EventServiceProvider is extended to use the <strong>$subscribers</strong> property to register the event listeners for the system.</p>
                                    </div><!--//section-block-->

                                    <div id="HistoryServiceProvider" class="section-block">
                                        <h3 class="block-title">HistoryServiceProvider</h3>
                                        
                                        <p>The HistoryServiceProvider registers the facade for the <a href="#history-management">History</a> classes.</p>
                                    </div><!--//section-block-->

                                    <div id="MacroServiceProvider" class="section-block">
                                        <h3 class="block-title">MacroServiceProvider</h3>
                                        
                                        <p>The MacroServiceProvider extends the Macro facade used by the <a href="http://laravelcollective.com" target="_blank">LaravelCollective</a> macro class.</p>

                                        <p>The macros themselves are stored in <strong>app\Helpers\Macros</strong> directory and can be used anywhere.</p>
                                    </div><!--//section-block-->

                                    <div id="RouteServiceProvider" class="section-block">
                                        <h3 class="block-title">RouteServiceProvider</h3>
                                        
                                        <p>The only addition to the RouteServiceProvider is in the boot method.</p>

                                        <p>Since most of the controller/routes use Laravels <a href="https://laravel.com/docs/master/routing#route-model-binding" target="_blank">Route/Model</a> Binding, there is one instance where we need to specify a binding.</p>

                                        <p>We specify this binding for use in <a href="https://github.com/rappasoft/laravel-5-boilerplate/blob/master/routes/Backend/Access.php#L56" target="_blank">deleting/restoring</a> a user, because the binding needs to know to have to check for deleted users as well. If you get rid of this and just use the default user binding, it will fail because it's not checking for a user id that has a non-null deleted_at timestamp.</p>
                                    </div><!--//section-block-->
                                </div><!--//section-block-->
                            </section><!--//doc-section--> 

                            <section id="repositories" class="doc-section">
                                <h2 class="section-title">Repositories</h2>
                                <div class="section-block">
                                    <p>Repositories are a way of extracting database logic into their own classes so you can have slim easy to read controllers.</p>

                                    <p>Repositories are injected into any controller that needs them via the constructor, and are resolved out of the service container.</p>

                                    <p>You do not have to use repositories, or repository/contract patterns, but it is good to learn ways to better structure your code instead of having bloated controllers.</p>

                                    <p><strong>Key Points</strong></p>

                                    <ul>
                                        <li>Repositories can extend a base repository class to get included helper methods such as <strong>find, getAll, getCount</strong>.</li>
                                        <li>Extending the base repository class also gives parent methods for <strong>save, update, delete, forceDelete, restore, and query.</strong></li>
                                        <li>If you extend the base repository you must have a constant called <strong>MODEL</strong> that is set to the model that you will be working with.</li>
                                        <li>If you extend the base repository you have access to <strong>$this->query()</strong> in the child class, which is the same as calling the model facade.</li>
                                        <li>In the case of <strong>PermissionRepository</strong> there are no methods, however because it does extend base repository you have access to all of the methods stated above.</li>
                                    </ul>
                                </div><!--//section-block-->
                            </section><!--//doc-section-->    

                            <section id="access-control" class="doc-section">
                                <h2 class="section-title">Access Control</h2>
                                <div class="section-block">
                                    <p>Laravel Boilerplate ships with a custom and feature-rich access control system that stems both the frontend and backend.</p>

                                    <p><strong>Features:</strong></p>

                                    <ul>
                                        <li>Register/Login/Logout/Password Reset</li>
                                        <li>Third party login (Github/Facebook/Twitter/Google/Linked In/BitBucket)</li>
                                        <li>Account Confirmation By E-mail</li>
                                        <li>Resend Confirmation E-mail</li>
                                        <li>Login Throttling</li>
                                        <li>
                                            Administrator Management
                                            <ul>
                                                <li>Searchable User Index</li>
                                                <li>Activate/Deactivate Users</li>
                                                <li>Soft &amp; Permanently Delete Users</li>
                                                <li>Resend User Confirmation E-mails</li>
                                                <li>Change Users Password</li>
                                                <li>Create/Manage Roles</li>
                                                <li>Manage Users Roles/Permissions</li>
                                                <li>"Login As" User</li>
                                            </ul>
                                        </li>
                                    </ul>

                                    <ul>
                                        <li><a class="scrollto" href="#access-config">Configuration</a></li>
                                        <li><a class="scrollto" href="#access-middleware">Middleware</a></li>
                                        <li><a class="scrollto" href="#create-access-middleware">Custom Middleware</a></li>
                                        <li><a class="scrollto" href="#access-blade-extensions">Blade Extensions</a></li>
                                    </ul>

                                    <div id="access-config" class="section-block">
                                        <h3 class="block-title">Configuration</h3>

                                        <div class="code-block">
                                            <pre><code class="language-php">/*
 * Users table used to store users
 */
'users_table' => 'users',

/*
 * Role model used by Access to create correct relations.
*/
'role' => Role::class,

/*
 * Roles table used by Access to save roles to the database.
 */
'roles_table' => 'roles',

/*
 * Permission model used by Access to create correct relations.
 */
'permission' => Permission::class,

/*
 * Permissions table used by Access to save permissions to the database.
 */
'permissions_table' => 'permissions',

/*
 * permission_role table used by Access to save relationship between permissions and roles to the database.
 */
'permission_role_table' => 'permission_role',

/*
 * role_user table used by Access to save assigned roles to the database.
 */
'role_user_table' => 'role_user',

/*
 * Configurations for the user
 */
'users' => [
    /*
     * The role the user is assigned to when they sign up from the frontend, not namespaced
     */
    'default_role' => 'User',
    //'default_role' => 2, //You can also use an ID

    /*
     * Whether or not the user has to confirm their email when signing up
     */
    'confirm_email' => true,

    /*
     * Whether or not the users email can be changed on the edit profile screen
     */
    'change_email' => false,
],

/*
 * Configuration for roles
 */
'roles' => [
    /*
     * Whether a role must contain a permission or can be used standalone as a label
     * Set this to false if you want to be able to create roles with no permissions to use more as groups
     */
    'role_must_contain_permission' => true
],

/*
 * Socialite session variable name
 * Contains the name of the currently logged in provider in the users session
 * Makes it so social logins can not change passwords, etc.
 */
'socialite_session_name' => 'socialite_provider',

/*
 * Application captcha specific settings
 */
'captcha' => [
    /*
     * Whether the registration captcha is on or off
     */
    'registration' => env('REGISTRATION_CAPTCHA_STATUS', false),
],</code></pre>
                                        </div><!--//code-block-->
                                    </div><!--//section-block-->

                                    <div id="access-middleware" class="section-block">
                                        <h3 class="block-title">Middleware</h3>

                                        <p>Included route middleware let you authorize by either a role or permission:</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">Route::group(['middleware' => 'access.routeNeedsPermission:view-backend'], function()
{
    Route::group(['prefix' => 'access'], function ()
        {
            /* User Management */
            Route::resource('users', 'Backend\Access\UserController');
        });
});</code></pre>
                                        </div><!--//code-block-->

                                        <p>The following middleware ships with the boilerplate:</p>

                                        <ul>
                                            <li><a class="scrollto" href="#RouteNeedsRole">access.routeNeedsRole</a></li>
                                            <li><a class="scrollto" href="#RouteNeedsPermission">access.routeNeedsPermission</a></li>
                                        </ul>

                                        <p><strong>Note:</strong></p>

                                        <ul>
                                            <li>Administrator role gets all roles/permissions by default.</li>
                                            <li>You can provide a list of roles or permissions separated by a semi-colon to be used as an array:</li>
                                        </ul>

                                        <div class="code-block">
                                            <pre><code class="language-php">//User may have either of the following permissions
access.routeNeedsPermission:view-backend;manage-users

//User may have either of the following roles
access.routeNeedsRole:Executive,User</code></pre>
                                        </div><!--//code-block-->
                                        
                                        <p>When using role or permissions list, an optional second parameter is available to say whether or not the user needs to possess all of the supplied roles or permissions, defaulted to false.</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">//User MUST HAVE view-backend and manage-users permissions
access.routeNeedsPermission:view-backend;manage-users,true

//User MUST HAVE both Executive and User roles
access.routeNeedsRole:Executive;User,true</code></pre>
                                        </div><!--//code-block-->

                                        <p>See also <a class="scrollto" href="#SessionTimeout">SessionTimeout</a>.</p>
                                    </div><!--//section-block-->

                                    <div id="create-access-middleware" class="section-block">
                                        <h3 class="block-title">Custom Middleware</h3>

                                        <p>If you would like to create your own middleware, the following methods are available:</p>

                                        <p><strong>Note:</strong> A helper method <strong>access()</strong> is also available. E.g. <strong>access()->hasRole('Administrator')</strong> which resolves the Access facade out of the service container. You can modify this function to add more functionality in <strong>app/helpers.php</strong>.</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">/**
     * Checks if the user has a Role by its name.
     * @param string $name
     * @return bool
*/
Access::hasRole($role);

/**
     * Checks to see if the user has an array of roles, and whether or not all must return true to authenticate
     * @param array $roles
     * @param boolean $needsAll
     * @return bool
*/
Access::hasRoles($roles, $needsAll);

/**
     * Check if user has a permission by its name.
     * This also has a wrapper function called hasPermission which takes the same arguments
     * @param string $permission.
     * @return bool
*/
Access::allow($permission);

/**
     * Check an array of permissions and whether or not all are required to continue
     * This also has a wrapper function called hasPermissions which takes the same arguments
     * @param array $permissions
     * @param boolean $needsAll
     * @return bool
*/
Access::allowMultiple($permissions, $needsAll);</code></pre>
                                        </div><!--//code-block-->

                                        <p><strong>Access::</strong> by default uses the currently authenticated user. You can also do:</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">$user->hasRole($role);
$user->hasRoles($roles, $needsAll);
$user->allow($permission);
$user->allowMultiple($permissions, $needsAll);
$user->hasPermission($permission); //Wrapper function for allow()
$user->hasPermissions($permissions, $needsAll); //Wrapper function for allowMultiple()</code></pre>
                                        </div><!--//code-block-->

                                        <p>There are also various methods that wrap the auth class:</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">access()->user()
access()->guest()
access()->logout()
access()->id()
access()->loginUsingId($id)</code></pre>
                                        </div><!--//code-block-->

                                        <p><strong>Note:</strong> <strong>access()</strong> can be replaced with the facade <strong>Access::</strong> where needed.</p>

                                        <h3>Don't Forget</h3>

                                        <p>The global composer registers a variable called <strong>$logged_in_user</strong> that can be used anywhere in the application, and will return the currently logged in user object if logged in, or false if not.</p>

                                        <p>This is good to avoid doing:</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">@if(access()->user())</code></pre>
                                        </div><!--//code-block-->

                                        <p>Everywhere, and instead shorten it to:</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">@if($logged_in_user)</code></pre>
                                        </div><!--//code-block-->

                                        <p>Now if you need to change the way you get your logged in user, you only have to do it one place instead of all over your application.</p>
                                    </div><!--//section-block-->

                                    <div id="access-blade-extensions" class="section-block">
                                        <h3 class="block-title">Blade Extensions</h3>

                                        <p>Access comes with @blade extensions to help you show and hide data by role or permission without clogging up your code with unwanted if statements:</p>

                                        <p>Note: These are just helper 'if' statements for your views, if you need more control in your view you should consider using the Access API to decide which view to show from your controller.</p>

                                        <hr />

                                        <h4>@role</h4>
                                        <p>Accepts a single Role Name or ID</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">@role('User')
    This content will only show if the authenticated user has the `User` role.
@endauth

@role(1)
    This content will only show if the authenticated user has the role with an ID of `1`.
@endauth</code></pre>
                                        </div><!--//code-block-->

                                        <h4>@roles</h4>
                                        <p>Accepts an array of Role Names or IDs</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">@needsroles(['Administrator', 'User'])
    This content will only show if the authenticated user has BOTH the `Administrator` role AND the `User` role.
@endauth

@needsroles([1, 2])
    This content will only show if the authenticated user has BOTH roles with ID's of `1` AND `2`.
@endauth</code></pre>
                                        </div><!--//code-block-->

                                        <h4>@permission</h4>
                                        <p>Accepts a single Permission Name or ID</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">@permission('view-backend')
    This content will only show if the authenticated user has the `view-backend` permission.
@endauth

@permission(1)
    This content will only show if the authenticated user permission with an ID of `1`.
@endauth</code></pre>
                                        </div><!--//code-block-->

                                        <h4>@permissions</h4>
                                        <p>Accepts an array of Permission Names or IDs</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">@permissions(['view-backend', 'view-some-content'])
    This content will only show if the authenticated user has the `view-backend` permission OR the `view-some-content` permission.
@endauth

@permissions([1, 2])
    This content will only show if the authenticated user has the permission with ID of `1` OR `2`.
@endauth</code></pre>
                                        </div><!--//code-block-->

                                        <h4>@needspermissions</h4>
                                        <p>Accepts an array of permissions or permission IDs and only returns true if the user has all permissions provided.</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">@needspermissions(['view-backend', 'view-some-content'])
    This content will only show if the authenticated user has BOTH the `view-backend` permission AND the `view-some-content` permission.
@endauth

@needspermissions([1, 2])
    This content will only show if the authenticated user has BOTH permissions with ID's of `1` AND `2`.
@endauth</code></pre>
                                        </div><!--//code-block-->

                                        <p><strong>Note:</strong> You can also use @else for an if/else statement.</p>

                                        <p>If you want to show or hide a specific section you can do so in your layout files the same way:</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">@role('User')
    @section('special_content')
@endauth

@permission('can_view_this_content')
    @section('special_content')
@endauth</code></pre>
                                        </div><!--//code-block-->

                                        <p><strong>Note:</strong> You can add more extensions by appending to <strong>App\Providers\AccessServiceProvider@registerBladeExtensions</strong></p>
                                    </div><!--//section-block-->
                                </div><!--//section-block-->
                            </section><!--//doc-section-->  

                            <section id="history-management" class="doc-section">
                                <h2 class="section-title">History Management</h2>
                                <div class="section-block">
                                    <p>The history Facade is a seamless way to log any activity being done by your users, either to keep a digital trail for accountability, or to display for a little wow factor.</p>

                                    <p>The API has a single function that can be called globally, where ever you need to log something:</p>

                                    <div class="code-block">
                                        <pre><code class="language-php">public function log($type, $text, $entity_id = null, $icon = null, $class = null, $assets = null);</code></pre>
                                    </div><!--//code-block-->

                                    <p>An example from the source:</p>

                                    <div class="code-block">
                                        <pre><code class="language-php">history()->log(
    $this->history_slug,
    'trans("history.backend.users.created") &lt;strong&gt;'.$event->user->name.'&lt;/strong&gt;'
    $event->user->id,
    'plus',
    'bg-green'
);</code></pre>
                                    </div><!--//code-block-->

                                    <p>Lets look line by line:</p>

                                    <div class="code-block">
                                        <pre><code class="language-php">history()->log(
    $this->history_slug, /* The Type, in this case it is the string 'User'. */
    'trans("history.backend.users.created") &lt;strong&gt;'.$event->user->name.'&lt;/strong&gt;' /* The text of the item, you can use trans functions and they will be processed when displaying, not before being inserted into the database. */
    $event->user->id, /* The ID of the entity being logged, in this case the User with the ID of 1 */
    'plus', /* The class of the font-awesome icon being used in the row. */
    'bg-green' /* The background color of the icon. */
);</code></pre>
                                    </div><!--//code-block-->

                                    <p>This call in the system ouputs:</p>

                                    <div class="screenshot-holder">
                                        <a href="../assets/images/history/create-example.png" data-title="History Log" data-toggle="lightbox" class="hoverZoomLink"><img class="img-responsive" src="../assets/images/history/create-example.png" alt="screenshot"></a>
                                        <a class="mask hoverZoomLink" href="../assets/images/history/create-example.png" data-title="History Log" data-toggle="lightbox"><i class="icon fa fa-search-plus"></i></a>
                                    </div> 

                                    <p>With the following database row:</p>

                                    <div class="screenshot-holder">
                                        <a href="../assets/images/history/create-example-database.png" data-title="History Log Database" data-toggle="lightbox" class="hoverZoomLink"><img class="img-responsive" src="../assets/images/history/create-example-database.png" alt="screenshot"></a>
                                        <a class="mask hoverZoomLink" href="../assets/images/history/create-example-database.png" data-title="History Log Database" data-toggle="lightbox"><i class="icon fa fa-search-plus"></i></a>
                                    </div> 

                                    <p>As you can see:</p>

                                    <ul>
                                        <li>The <strong>type_id</strong> is a foreign key to the <strong>history_types</strong> table, in this case refrencing <strong>'User'</strong>.</li>
                                        <li>The <strong>user_id</strong> is the user that performed the action, or the logged in user.</li>
                                        <li>The <strong>entity_id</strong> is the object that the action was performed on.</li>
                                        <li>The <strong>text</strong> is the copy to display, again the trans will be converted when the <strong>render</strong> function displays the logs, that way they can dynamically change with the site language.</li>
                                        <li>There are no assets in this case, scroll to <a class="scrollto" href="#history-assets">assets</a> for documentation.</li>
                                        <li>The <strong>created/updated</strong> timestamps are when the item was logged.</li>
                                    </ul>

                                    <p>This particular example is done in an event subscriber, which is a clean place to log these types of events and not to clutter up controller or repository code. But they can be placed anywhere as the history() helper is global.</p>

                                    <section id="history-assets" class="doc-section">
                                        <h2 class="section-title">Assets</h2>
                                        <div class="section-block">
                                            <p>There is an optional last parameter in the log function called <strong>assets</strong>. Assets are a way of linking the entities in the log text to a respective route.</p>

                                            <p>For example, maybe you want <strong>John Doe</strong> in the above example to link to his respective user detail page.</p>

                                            <p>Building off the above example, in order to link the assets we would do this:</p>

                                            <pre><code class="language-php">history()->log(
    $this->history_slug,
    'trans("history.backend.users.created") &lt;strong&gt;$1&lt;/strong&gt;'
    $event->user->id,
    'plus',
    'bg-green',
    [
        'link' => ['admin.access.user.show', $event->user->name, $event->user->id],
    ]
);</code></pre>
                                        </div><!--//section-block-->

                                        <p>When the above code is rendered the $1 variable in the text will be converted to a link pointing to the user show method with the user's ID.</p>

                                        <p><strong>Notes:</strong></p>

                                        <ul>
                                            <li>You can have up to 3 routes for now, named <strong>link, link2, link3.</strong></li>
                                            <li>The order they come is the order of the assets.</li>
                                            <li>As of right now only route() is supported.</li>
                                            <li>Link syntax is [route, title, params] <strong>(Params can be an array or single id)</strong></li>
                                        </ul>

                                        <p>Here is a fictional example showing how to link 2 entities:</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">history()->log(
    $this->history_slug,
    'trans("history.tasks.created") &lt;strong&gt;$1&lt;/strong&gt; for &lt;strong&gt;$2&lt;/strong&gt;',
    $event->task->id,
    'plus',
    'bg-green',
    [
        'link' => ['admin.clients.task.show', $event->task->title, [$event->client->id, $event->task->id]],
        'link2' => ['admin.clients.show', $event->client->name, $event->client->id],
    ]
);</code></pre>
                                        </div><!--//code-block-->

                                        <p>The above would output something such as:</p>

                                        <div class="code-block">
                                            <pre>Admin Istrator created task <strong><a href="#">website update</a></strong> for <strong><a href="#">Google</a></strong>.</code></pre>    

                                        <p>Where <strong>website update</strong> is linked to the task detail page, and <strong>Google</strong> is linked to the client detail page.</p>
                                    </section><!--//doc-section-->    

                                    <section id="history-rendering" class="doc-section">
                                        <h2 class="section-title">Rendering</h2>
                                        <div class="section-block">
                                            <p>There are currently 3 types of rendering available:</p>

                                            <ul>
                                                <li><a class="scrollto" href="#history-render">render</a> - Renders all history</li>
                                                <li><a class="scrollto" href="#history-renderType">renderType</a> - Renders all history of a given type</li>
                                                <li><a class="scrollto" href="#history-renderEntity">renderEntity</a> - Renders all history for a specific entity</li>
                                            </ul>

                                            <p><strong>Note:</strong> all items are sorted by their created_at timestamp in descending order (last first).</p>

                                            <section id="history-render" class="doc-section">
                                                <h3 class="section-title">render($limit = null, $paginate = true, $pagination = 10)</h3>
                                                <div class="section-block">
                                                    <p>The <strong>render()</strong> function renders all history from all entities and types in one list. This is good for a dashboard, where you want to show a history of all that's going on in the application.</p>

                                                    <p>See <a href="https://github.com/rappasoft/laravel-5-boilerplate/blob/master/resources/views/backend/dashboard.blade.php#L31" target="_blank">this line</a> in the backend dashboard for reference.</p>

                                                    <p><strong>Parameters:</strong></p>

                                                    <ul>
                                                        <li><strong>$limit</strong> - The amount to rows to grab (<strong>take()</strong> method)</li>
                                                        <li><strong>$paginate</strong> - If paginating or not</li>
                                                        <li><strong>$pagination</strong> - Amount of items to render per page</li>
                                                    </ul>

                                                    <p><strong>Examples:</strong></p>

                                                    <ul>
                                                        <li><strong>render()</strong> - Renders global history with pagination of 10 items per page</li>
                                                        <li><strong>render(5, false)</strong> - Renders only 5 most recent history from the system with no pagination</li>
                                                        <li><strong>render(null, true, 2)</strong> - Renders global pagination with 2 items per page</li>
                                                    </ul>
                                                </div><!--//section-block-->
                                            </section><!--//doc-section-->  

                                            <section id="history-renderType" class="doc-section">
                                                <h3 class="section-title">renderType($type, $limit = null, $paginate = true, $pagination = 10)</h3>
                                                <div class="section-block">
                                                     <p>The <strong>renderType()</strong> function renders all history of a given type. This is good for the index page of a model type where you want a list of all history happening to a given type, that's not entity specific.</p>

                                                     <p>This method is almost identical to <strong>render()</strong> with the addition of the now first parameter <strong>$type</strong> which can be a string or history type ID.</p>

                                                     <p>See <a href="https://github.com/rappasoft/laravel-5-boilerplate/blob/master/resources/views/backend/access/index.blade.php#L54" target="_blank">this line</a> in the user index for reference.</p>

                                                     <p><strong>Parameters:</strong></p>

                                                    <ul>
                                                        <li><strong>$type (Required)</strong> - The history type, either a string or an ID</li>
                                                        <li><strong>$limit</strong> - The amount to rows to grab (<strong>take()</strong> method)</li>
                                                        <li><strong>$paginate</strong> - If paginating or not</li>
                                                        <li><strong>$pagination</strong> - Amount of items to render per page</li>
                                                    </ul>

                                                    <p><strong>Examples:</strong></p>

                                                    <ul>
                                                        <li><strong>renderType('User')</strong> - Render history with pagination of 10 items per page of the User type</li>
                                                        <li><strong>renderType('User', 5, false)</strong> - Renders 5 most recent history from the User type with no pagination</li>
                                                        <li><strong>renderType('User', null, true)</strong> - Renders regular pagination for User type with the default 10 per page</li>
                                                    </ul>
                                                </div><!--//section-block-->
                                            </section><!--//doc-section-->  

                                            <section id="history-renderEntity" class="doc-section">
                                                <h3 class="section-title">renderEntity($type, $entity_id, $limit = null, $paginate = true, $pagination = 10)</h3>
                                                <div class="section-block">
                                                    <p>The <strong>renderEntity()</strong> function renders all history of a given entity of type. This is good for the show/detail page of a model type where you want a list of all history happening to that specific entity of that specific type.</p>

                                                     <p>This method is almost identical to <strong>renderType()</strong> with the addition of the now second parameter <strong>$entity_id</strong> which is the ID of the entity being shown.</p>

                                                     <p>See <a href="https://github.com/rappasoft/laravel-5-boilerplate/blob/master/resources/views/backend/access/show/tabs/history.blade.php#L1" target="_blank">this line</a> in the user detail page for reference.</p>

                                                     <p><strong>Parameters:</strong></p>

                                                    <ul>
                                                        <li><strong>$type (Required)</strong> - The history type, either a string or an ID</li>
                                                        <li><strong>$entity_id (Required)</strong> - The ID of the entity of the given type being rendered</li>
                                                        <li><strong>$limit</strong> - The amount to rows to grab (<strong>take()</strong> method)</li>
                                                        <li><strong>$paginate</strong> - If paginating or not</li>
                                                        <li><strong>$pagination</strong> - Amount of items to render per page</li>
                                                    </ul>

                                                    <p><strong>Examples:</strong></p>

                                                    <ul>
                                                        <li><strong>renderEntity('User', 5)</strong> - Render history with pagination of 10 items per page for the User with ID of 5</li>
                                                        <li><strong>renderEntity('User', 5, 5, false)</strong> - Renders 5 most recent history for entity with ID of 5 from the User category with no pagination</li>
                                                        <li><strong>renderEntity('User', 5, null, true, 5)</strong> - Renders pagination with 5 items per page with the entity with id of 5 from the User category</li>
                                                    </ul>
                                                </div><!--//section-block-->
                                            </section><!--//doc-section-->

                                            <section id="history-pagination" class="doc-section">
                                                <h3 class="section-title">Pagination</h3>
                                                <div class="section-block">
                                                    <p>There is a property of the history class that lets you set the type of pagination:</p>

                                                    <div class="code-block">
                                                        <pre><code class="language-php">private $paginationType = "simplePaginate";</code></pre>
                                                    </div><!--//code-block-->

                                                    <p>You can use any Laravel pagination supported, right now it's just <strong>simplePaginate</strong> and <strong>paginate</strong>.</p>
                                                </div><!--//section-block-->
                                            </section><!--//doc-section-->

                                            <section id="history-list" class="doc-section">
                                                <h3 class="section-title">Editing The List</h3>
                                                <div class="section-block">
                                                    <p>The <strong>outer</strong> markup of the lists generated can be modified in <strong><a href="https://github.com/rappasoft/laravel-5-boilerplate/blob/master/resources/views/backend/history/partials/list.blade.php" target="_blank">resources\views\backend\history\partials\list.blade.php</a></strong>.</p>

                                                    <p>The <strong>inner</strong> markup of the lists generated can be modified in <strong><a href="https://github.com/rappasoft/laravel-5-boilerplate/blob/master/resources/views/backend/history/partials/item.blade.php" target="_blank">resources\views\backend\history\partials\item.blade.php</a></strong>.</p>
                                                </div><!--//section-block-->
                                            </section><!--//doc-section-->    
                                        </div><!--//section-block-->
                                    </section><!--//doc-section-->      
                                </div><!--//section-block-->
                            </section><!--//doc-section-->    

                            <section id="search-stub" class="doc-section">
                                <h2 class="section-title">Search Stub</h2>
                                <div class="section-block">
                                    <p>The search box on the sidebar of the backend is functional, though does not search anything. Implementing the actual search functionality is up to you.</p>

                                    <p>The Search Functionality Stub includes:</p>

                                    <ul>
                                        <li>The search form that when fired triggers the</li>
                                        <li>Search route that leads to the</li>
                                        <li>Search controller with a index method</li>
                                    </ul>

                                    <p>If no search term is supplied, it will redirect to the dashboard with an error.</p>

                                    <p>There is a <strong>$results</strong> variable in the <strong>index</strong> method that is the only thing you need to make functional.</p>

                                    <p>After that the <strong>$results</strong> variable is passed to the search view and you can look through your results as you wish.</p>
                                </div><!--//section-block-->
                            </section><!--//doc-section-->   

                            <section id="blade-extensions" class="doc-section">
                                <h2 class="section-title">Blade Extensions</h2>
                                <div class="section-block">
                                    <p>See <a class="scrollto" href="#BladeServiceProvider">BladeServiceProvider</a>.</p>
                                </div><!--//section-block-->
                            </section><!--//doc-section-->  

                            <section id="localization" class="doc-section">
                                <h2 class="section-title">Localization</h2>
                                <div class="section-block">
                                    <p>Laravel Boilerplate comes in many languages, each language has it's own folder as usual, the language files are very well organized and indented.</p>

                                    <p>If you would like to contribute a language, please make a pull request based on the <a href="https://github.com/rappasoft/laravel-5-boilerplate/wiki/Localization" target="_blank">requirements</a>.</p>

                                    <p>The parts of the localization system are:</p>

                                    <ul>
                                        <li>The <a class="scrollto" href="#AccessServiceProvider">AppServiceProvider boot method</a></li>
                                        <li>The <a class="scrollto" href="#LocaleMiddleware">LocaleMiddleware</a></li>
                                        <li>The <a href="https://github.com/rappasoft/laravel-5-boilerplate/tree/master/resources/lang" target="_blank">language files</a></li>
                                        <li>The <a href="https://github.com/rappasoft/laravel-5-boilerplate/blob/master/resources/views/includes/partials/lang.blade.php" target="_blank">language dropdowns</a></li>
                                    </ul>

                                    <p>The language files try to be as organized as possible first by file name, then by keys frontend, backend, or global. Then by the 'type' they may be display, i.e. 'auth'. Please try to keep them organized if you are contributing to them on GitHub.</p>
                                </div><!--//section-block-->
                            </section><!--//doc-section-->    

                            <section id="helpers" class="doc-section">
                                <h2 class="section-title">Helpers</h2>
                                <div class="section-block">
                                    <div id="helper-classes"  class="section-block">
                                        <h3 class="block-title">Helper Classes</h3>
                                        
                                        <p>There are a few misc. helper classes we have written that we couldn't find a good place for, and didn't want messy controllers with so we extracted them out as <strong>Helper</strong> classes.</p>

                                        <p>They are located in the <strong>app\Helpers</strong> directory.</p>

                                        <p>Any helpers that were deemed useful globally throughtout the application have folders in the root, and helpers that were to specific to a section have <strong>Frontend</strong> or <strong>Backend</strong> folders like many other places throughout the file structure.</p>

                                        <p>Each one serves a specific purpose. There are 3 that currently ship with a default installation.</p>

                                        <ul>
                                            <li>Auth\Auth</li>
                                            <li>Frontend\Auth\Socialite</li>
                                            <li>Macros</li>
                                        </ul><br/>

                                        <h4>Auth\Auth</h4>
                                        <p>Currently houses helper functions to deal with the "Login As" functionality of the backend portal, specifically managing sessions.</p><br/>

                                        <h4>Frontend\Auth\Socialite</h4>
                                        <p>Houses helper methods to display the social login links based on what is set in the environment file. As well as a function that returns the currently supported socialite providers.</p><br/>

                                        <h4>Macros</h4>
                                        <p>Houses the macro traits that are registered in the <a class="scrollto" href="#MacroServiceProvider">MacroServiceProvider</a>.</p>
                                    </div><!--//section-block-->

                                    <div id="helper-globals"  class="section-block">
                                        <h3 class="block-title">Helper Globals</h3>
                                        
                                        <p>There is an <strong>app\helpers.php</strong> file which is autoloaded with composer that registers a few global functions for your convenience.</p>

                                        <hr />

                                        <h4>app_name()</h4>

                                        <div class="code-block">
                                            <pre><code class="language-php">{{ app_name() }} returns the config app.name value.</code></pre>
                                        </div><!--//code-block-->

                                        <h4>access()</h4>
                                        <p>Global function for the Access:: facade.</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">if (access()->allow('this-permission'))</code></pre>
                                        </div><!--//code-block-->

                                        <h4>history()</h4>
                                        <p>Global function for the History:: facade.</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">history()->log(...)</code></pre>
                                        </div><!--//code-block-->

                                        <h4>gravatar()</h4>
                                        <p>Global function for the Gravatar:: facade.</p>

                                        <div class="code-block">
                                            <pre><code class="language-php">return gravatar()->get($user->email, ['size' => 50]);</code></pre>
                                        </div><!--//code-block-->

                                        <h4>includeRouteFiles($folder)</h4>
                                        <p>Loops through a folder and requires all PHP files - <a class="scrollto" href="#routes">See Routes</a>.</p>
                                    </div><!--//section-block-->
                                </div><!--//section-block-->
                            </section><!--//doc-section-->      

                            <section id="resources" class="doc-section">
                                <h2 class="section-title">Resources</h2>
                                <div class="section-block">
                                    <p>The <strong>resources</strong> section has the same high level folder structure as a default installation, with many new items inside:</p>

                                    <ul>
                                        <li><a class="scrollto" href="#resources-gulpfile">gulpfile.js</a></li>
                                        <li><a class="scrollto" href="#resources-assets">assets</a></li>
                                        <li><a class="scrollto" href="#resources-lang">lang</a></li>
                                        <li><a class="scrollto" href="#resources-views">views</a></li>
                                    </ul>

                                    <div id="resources-gulpfile" class="section-block">
                                        <h3 class="block-title">gulpfile.js</h3>

                                        <p>The gulpfile that ships with the project is well documented and pretty self-explanatory, it currently looks like:</p>

                                        <div class="code-block">
                                            <pre><code class="language-js">const elixir = require('laravel-elixir');

require('laravel-elixir-vue-2');
require('./elixir-extensions');

/*
 |--------------------------------------------------------------------------
 | Elixir Asset Management
 |--------------------------------------------------------------------------
 |
 | Elixir provides a clean, fluent API for defining some basic Gulp tasks
 | for your Laravel application. By default, we are compiling the Sass
 | file for your application as well as publishing vendor resources.
 |
 */

elixir((mix) => {
    /**
     * Copy needed files from /node directories
     * to /public directory.
     */
    mix.copy(
        'node_modules/font-awesome/fonts',
        'public/build/fonts/font-awesome'
    )
    .copy(
        'node_modules/bootstrap-sass/assets/fonts/bootstrap',
        'public/build/fonts/bootstrap'
    )

    /**
     * Process frontend SCSS stylesheets
     */
    .sass([
        'frontend/app.scss',
        'plugin/sweetalert/sweetalert.scss'
    ], 'resources/assets/css/frontend/app.css')

    /**
     * Combine pre-processed frontend CSS files
     */
    .styles([
        'frontend/app.css'
    ], 'public/css/frontend.css')

    /**
     * Pack it up
     * Saves to a dist folder in resources, it is then combined and placed in public
     */
    .webpack('frontend/app.js', './resources/assets/js/dist/frontend.js')

    /**
     * Combine frontend scripts
     */
    .scripts([
        'dist/frontend.js',
        'plugin/sweetalert/sweetalert.min.js',
        'plugins.js'
    ], 'public/js/frontend.js')

    /**
     * Process backend SCSS stylesheets
     */
    .sass([
        'backend/app.scss',
        'plugin/toastr/toastr.scss',
        'plugin/sweetalert/sweetalert.scss'
    ], 'resources/assets/css/backend/app.css')

    /**
     * Combine pre-processed backend CSS files
     */
    .styles([
        'backend/app.css'
    ], 'public/css/backend.css')

    /**
     * Pack it up
     * Saves to a dist folder in resources, it is then combined and placed in public
     */
    .webpack('backend/app.js', './resources/assets/js/dist/backend.js')

    /**
     * Make RTL (Right To Left) CSS stylesheet for the backend
     */
    .rtlCss()

    /**
     * Combine backend scripts
     */
    .scripts([
        'dist/backend.js',
        'plugin/sweetalert/sweetalert.min.js',
        'plugin/toastr/toastr.min.js',
        'plugins.js',
        'backend/custom.js'
    ], 'public/js/backend.js')

    /**
     * Combine pre-processed rtl CSS files
     */
    .styles([
        'rtl/bootstrap-rtl.css'
    ], 'public/css/rtl.css')

    /**
     * Apply version control
     */
    .version([
        "public/css/frontend.css",
        "public/js/frontend.js",
        "public/css/backend.css",
        "public/css/backend-rtl.css",
        "public/js/backend.js",
        "public/css/rtl.css"
    ])

    /**
     * Run tests
     */
    .phpUnit();
});</code></pre>
                                        </div><!--//code-block-->
                                    </div><!--//section-block-->    

                                    <div id="resources-assets" class="section-block">
                                        <h3 class="block-title">Assets</h3>
                                        
                                        <ul>
                                            <li><a class="scrollto" href="#resource-assets-css">css</a></li>
                                            <li><a class="scrollto" href="#resource-assets-js">js</a></li>
                                            <li><a class="scrollto" href="#resource-assets-sass">sass</a></li>
                                        </ul>

                                        <div id="resources-assets-css" class="section-block">
                                            <h4 class="block-title">CSS</h4>

                                            <p>This folder holds the compiled sass files speficied in the gulpfile before they are versioned and made public. You should not edit the frontend/backend folders as anytime you recompile your assets they will be overwritten.</p>

                                            <p><strong>Note:</strong> The <strong>rtl</strong> folder is a static css file and not compiled from sass.</p>

                                            <p><strong>Note:</strong> The generated <strong>backend-rtl.css</strong> in <strong>public/css</strong> is a file is created from the <strong>rtlCss()</strong> function in <strong>gulpfile.js</strong> that is an Elixir extension imported from <strong>./elixir-extensions.js</strong>.</p>
                                        </div><!--//section-block-->

                                        <div id="resources-assets-js" class="section-block">
                                            <h4 class="block-title">JS</h4>

                                            <ul>
                                                <li><strong>/backend</strong> - Contains the backend specific (Admin LTE) javascripts to be compiled.</li>
                                                <li><strong>/components</strong> - Contains the Vue components for backend and frontend.</li>
                                                <li><strong>/dist</strong> - Contains the compiled javascripts ready to be versioned.</li>
                                                <li><strong>/frontend</strong> - Contains the frontend specific javascripts to be compiled.</li>
                                                <li><strong>/plugin</strong> - Contains any javscript plugins that would be benificial globally.</li>
                                                <li><strong>bootstrap.js</strong> - The Laravel javascript bootstrap file.</li>
                                                <li><strong>plugins.js</strong> - Contains useful plugins and snippets that would be benificial globally.</li>
                                            </ul>
                                        </div><!--//section-block-->

                                        <div id="resources-assets-sass" class="section-block">
                                            <h4 class="block-title">Sass</h4>

                                            <ul>
                                                <li><strong>/backend</strong> - Contains backend .scss files (Admin LTE) ready to be compiled into css.</li>
                                                <li><strong>/frontend</strong> - Contains frontend .scss files ready to be compiled into css.</li>
                                                <li><strong>/plugin</strong> - Contains plugin .scss files associated with the plugin folder in the <strong>js</strong> directory.</li>
                                                <li><strong>_helpers.scss</strong> - A place to put helper scss methods that can be used globally.</li>
                                            </ul>
                                        </div><!--//section-block-->
                                    </div><!--//section-block-->

                                    <div id="resources-lang" class="section-block">
                                        <h3 class="block-title">Lang</h3>
                                        
                                        <p>See <a class="scrollto" href="#Localization">Localization</a>.</p>
                                    </div><!--//section-block-->

                                    <div id="resources-views" class="section-block">
                                        <h3 class="block-title">Views</h3>
                                        
                                        <ul>
                                            <li><strong>/backend</strong> - The backend blade files.</li>
                                            <li><strong>/errors</strong> - The error code blade files.</li>
                                            <li><strong>/frontend</strong> - The frontend blade files</li>
                                            <li><strong>/includes</strong> - Blade files that are included in all master app layouts.</li>
                                            <li><strong>/vendor</strong> - Files generated from the vendor:publish command.</li>
                                        </ul>
                                    </div><!--//section-block-->
                                </div><!--//section-block-->
                            </section><!--//doc-section--> 

                            <section id="testing" class="doc-section">
                                <h2 class="section-title">Testing</h2>
                                <div class="section-block">
                                    <p>The test suite is currently comprised of over 100 tests and 500 assertions to test all of the sections in this documentation.</p>

                                    <p>We will not go into detail here since they change so often, but with a fresh installation everything should pass if you have the right configurations.</p>

                                    <p>To run the tests run <strong>phpunit</strong> from the command line in the root of the project.</p>
                                </div><!--//section-block-->
                            </section><!--//doc-section--> 

                            <section id="misc" class="doc-section">
                                <h2 class="section-title">Misc.</h2>

                                <div id="flash-messages"  class="section-block">
                                    <h3 class="block-title">Flash Messages</h3>
                                    
                                    <p>The <a href="https://github.com/rappasoft/laravel-5-boilerplate/blob/master/resources/views/includes/partials/messages.blade.php" target="_blank">messages.blade.php</a> file is included after the body of all master app layouts in this project, and takes care of displaying any errors from a session, validation, etc using bootstrap alert boxes.</p>

                                    <p>If not a validation error, or message bag error, then the following session variables are supported:</p>

                                    <ul>
                                        <li><strong>flash_success</strong> - Bootstrap <strong>alert-success</strong> box.</li>
                                        <li><strong>flash_warning</strong> - Bootstrap <strong>alert-warning</strong> box.</li>
                                        <li><strong>flash_info</strong> - Bootstrap <strong>alert-info</strong> box.</li>
                                        <li><strong>flash_danger</strong> - Bootstrap <strong>alert-danger</strong> box.</li>
                                        <li><strong>flash_message</strong> - Bootstrap <strong>alert</strong> box.</li>
                                    </ul>

                                    <p>You will see these used in many controller methods, or in <a href="#exceptions" class="scrollto">exception handling</a> except they use Laravel's <a href="#magic-methods">magic method</a> syntax.
                                </div><!--//section-block-->

                                <div id="magic-methods" class="section-block">
                                    <h3 class="block-title">Magic Methods</h3>
                                    
                                    <p>This application makes use of Laravel's magic methods in many places, especially controllers.</p>

                                    <p>For example, you may see a controller return that looks like this:</p>

                                    <div class="code-block">
                                        <pre><code class="language-php">return redirect()->route('admin.access.user.index')->withFlashSuccess(trans('alerts.backend.users.created'));</code></pre>
                                    </div><!--//code-block-->

                                    <p>or:</p>

                                    <div class="code-block">
                                        <pre><code class="language-php">return view('backend.access.show')->withUser($user);</code></pre>
                                    </div><!--//code-block-->

                                    <p>In both of these examples you will see a compound function call, that doesn't exist in the documentation.</p>

                                    <ul>
                                        <li>withFlashDanger</li>
                                        <li>withUsers</li>
                                    </ul>

                                    <p>Laravel will convert both of these methods to a default <strong>with()</strong> method when it compiles, so both of the above examples will output the following code.</p>

                                    <div class="code-block">
                                        <pre><code class="language-php">return redirect()->route('admin.access.user.index')->with('flash_danger', trans('alerts.backend.users.created'));</code></pre>
                                    </div><!--//code-block-->

                                    <p>or:</p>

                                    <div class="code-block">
                                        <pre><code class="language-php">return view('backend.access.show')->with('user', $user);</code></pre>
                                    </div><!--//code-block-->

                                    <p>Both methods work, but I think the magic makes it more elegant so I use that throughout.</p>
                                </div><!--//section-block-->

                                <div id="action-buttons" class="section-block">
                                    <h3 class="block-title">Action Buttons</h3>
                                    
                                    <p>Anywhere throughout the system that there is a table that allows CRUD operations, with associated buttons, the buttons (called <strong>action buttons</strong>) are held within a trait on the model.</p>

                                    <p>We use this approach to make it easy to output buttons for each resource without having duplicate markup in multiple places, plus it takes care of the entity ID's and other stuff, such as converting all <strong>delete</strong> buttons for links that trigger a form instead of a form themselves. (This uses a method included in the global javascript plugin file.)</p>

                                    <p>For example the buttons to the right of the users datatable in the backend, are generated in <a href="https://github.com/rappasoft/laravel-5-boilerplate/blob/master/app/Models/Access/User/Traits/Attribute/UserAttribute.php#L98" target="_blank">>this trait</a>.</p>

                                    <div class="code-block">
                                        <pre><code class="language-php">public function getShowButtonAttribute()
{
    return '&lt;a href="' . route('admin.access.user.show', $this) . '" class="btn btn-xs btn-info">&lt;i class="fa fa-search" data-toggle="tooltip" data-placement="top" title="' . trans('buttons.general.crud.view') . '">&lt;/i&gt;&lt;/a&gt; ';
}</code></pre>
                                    </div><!--//code-block-->

                                    <p>This outputs the <strong>show</strong> button for each user row in the table with their respective ID and looks like this <img src="../assets/images/attributes/show.png" />.</p>

                                    <p>On interesting button to look at is the delete button:</p>

                                    <div class="code-block">
                                        <pre><code class="language-php">public function getDeleteButtonAttribute()
{
    if ($this->id != access()->id()) {
        return '&lt;a href="' . route('admin.access.user.destroy', $this) . '"
             data-method="delete"
             data-trans-button-cancel="' . trans('buttons.general.cancel') . '"
             data-trans-button-confirm="' . trans('buttons.general.crud.delete') . '"
             data-trans-title="' . trans('strings.backend.general.are_you_sure') . '"
             class="btn btn-xs btn-danger">&lt;i class="fa fa-trash" data-toggle="tooltip" data-placement="top" title="' . trans('buttons.general.crud.delete') . '"&gt;&lt;/i&gt;&lt;/a&gt; ';
    }

    return '';
}</code></pre>
                                    </div><!--//code-block-->

                                    <p>Ignoring the if statement for this example, you can see that the delete button is actually a link. But that's insecure, isn't it? Actually no, take note of the <strong>data-method="delete"</strong> property of the link.</p>

                                    <p>If you look at the source of the delete button you will see this:</p>

                                    <div class="code-block">
                                        <pre><code class="language-markup">&lt;a data-method="delete" data-trans-button-cancel="Cancel" data-trans-button-confirm="Delete" data-trans-title="Are you sure?" class="btn btn-xs btn-danger" style="cursor:pointer;" onclick="$(this).find(&quot;form&quot;).submit();">&lt;i class="fa fa-trash" data-toggle="tooltip" data-placement="top" title="" data-original-title="Delete"&gt;&lt;/i&gt;
&lt;form action="http://l5boilerplate.dev/admin/access/user/1" method="POST" name="delete_item" style="display:none"&gt;
   &lt;input type="hidden" name="_method" value="delete"&gt;
   &lt;input type="hidden" name="_token" value="YOUR_CSRF_TOKEN"&gt;
&lt;/form&gt;
&lt;/a&gt;</code></pre>
                                    </div><!--//code-block-->

                                    <p>Because of <a href="https://github.com/rappasoft/laravel-5-boilerplate/blob/master/resources/assets/js/plugins.js#L11" target="_blank">this function</a>, all <strong>data-method="delete"</strong> property get a form injected inside them that calls a DELETE route, it also takes care of popping up an "are you sure you want to delete?" alert box before resuming.</p>

                                    <p><strong>Note:</strong> The other data-* methods on the link take care of injecting the appropriate language into the sweetalert alert box that pops up which looks like this:</p>

                                    <div class="screenshot-holder" style="max-width:300px">
                                        <a href="../assets/images/attributes/delete.png" data-title="Delete Alert Box" data-toggle="lightbox" class="hoverZoomLink"><img class="img-responsive" src="../assets/images/attributes/delete.png" alt="screenshot"></a>
                                        <a class="mask hoverZoomLink" href="../assets/images/attributes/delete.png" data-title="Delete Alert Box" data-toggle="lightbox"><i class="icon fa fa-search-plus"></i></a>
                                    </div><br/>

                                    <p><strong>Finally</strong> each attribute trait has a last method called <strong>getActionButtonsAttribute()</strong> which concatinates all of the button methods together and displays all of the buttons at once like:</p>

                                    <div class="code-block">
                                        <pre><code class="language-php">$user->action_buttons</code></pre>
                                    </div><!--//code-block-->

                                    <p>displays:</p>

                                    <p><img src="../assets/images/attributes/action_buttons.png" /></p>

                                    <p><strong>Note:</strong> The <strong>getActionButtonsAttribute()</strong> method is another example of <a href="https://laravel.com/docs/master/eloquent-mutators#defining-an-accessor" target="_blank">Laravel magic</a>.</p>
                                </div><!--//section-block-->

                                <div id="socialite" class="section-block">
                                    <h3 class="block-title">Socialite</h3>
                                    
                                    <p>To configure socialite, add your credentials to your .env file. The redirects must follow the convention <strong>http://mysite.com/login/SERVICE</strong>. Available services are <strong>github, facebook, linkedin, bitbucket, twitter, and google</strong>. The links on the login page are generated based on which credentials are provided in the .env file.</p><br/>

                                    <h4>BitBucket</h4>
                                    <p>You must set permissions of your OAuth consumer to at least <strong>Account: Read</strong> and <strong>Repositories: Read</strong></p>

                                    <p><strong>Also:</strong> In order for this option to work, <strong>email</strong> must be <strong>nullable</strong> on the <strong>users</strong> table, as well as the <strong>unique email table key</strong> removed. Do this at your own risk. There is no other option I know of for now.</p><br/>

                                    <h4>GitHub</h4>
                                    <p>No known quirks, should work as is.</p><br/>

                                    <h4>Google</h4>
                                    <p>If you are getting an <strong>Access Not Configured</strong> error message:</p>

                                    <p>Activate the <strong>Google+ API</strong> from the Google Developers Console.</p><br/>

                                    <h4>Facebook</h4>
                                    <p><strong>For the Given URL is not allowed by the Application error message:</strong></p>

                                    <ol>
                                        <li>Go to basic settings for your app</li>
                                        <li>Select Add Platform</li>
                                        <li>Select Website</li>
                                        <li>Put URL in the Site URL</li>
                                    </ol><br/>

                                    <h4>Linked In</h4>
                                    <p><strong>r_basicprofile</strong> and <strong>r_emailaddress</strong> must be selected in <strong>Default Application Permissions</strong>.</p>

                                    <p>The callback URL must be submitted under the <strong>OAuth 2.0</strong> section.</p><br/>

                                    <h4>Twitter</h4>
                                    <p>For Twitter to grab the user's email address for you application, it must be whitelisted as explained here: <a href="https://dev.twitter.com/rest/reference/get/account/verify_credentials" target="_blank">https://dev.twitter.com/rest/reference/get/account/verify_credentials</a></p><br/>

                                    <h4>Other</h4>
                                    <p>If you are getting a <strong>cURL error 60</strong> on localhost, follow <a href="http://stackoverflow.com/questions/28635295/laravel-socialite-testing-on-localhost-ssl-certificate-issue" target="_blank">these directions</a>.</p>
                                </div><!--//section-block-->

                                <div id="troubleshooting" class="section-block">
                                    <h3 class="block-title">Troubleshooting</h3>
                                    
                                    <p>If for any reason something goes wrong, try each of the following:</p>

                                    <p>Delete the <strong>composer.lock</strong> file</p>

                                    <p>Run the <strong>dumpautoload</strong> command</p>

                                    <div class="code-block">
                                        <pre><code class="language-php">$ composer dumpautoload -o</code></pre>
                                    </div><!--//code-block-->

                                    <p>If the above fails to fix, and the command line is referencing errors in compiled.php, do the following:</p>

                                    <p>Delete the <strong>storage/framework/compiled.php</strong> file</p>

                                    <p>If all of the above don't work please <a href="https://github.com/rappasoft/Laravel-5-Boilerplate/issues" target="_blank">report here</a>.</p>
                                </div><!--//section-block-->

                                <div id="deployment" class="section-block">
                                    <h3 class="block-title">Deployment</h3>
                                    
                                    <p>When pushing your app to production, you should make sure you run the following:</p><br/>

                                    <h4>gulp --production</h4>
                                    <p>Compress all of you assets into a single file specified in <a href="https://github.com/rappasoft/laravel-5-boilerplate/blob/master/gulpfile.js" target="_blank">gulpfile.js.</a></p><br/>

                                    <h4><a href="https://laravel.com/docs/master/configuration#configuration-caching" target="_blank">Config Caching</a> php artisan config:cache</h4>
                                    <p>Caches all of your configuration files into a single file.</p><br/>

                                    <h4><a href="https://laravel.com/docs/master/controllers#route-caching" target="_blank">Route Caching</a> php artisan route:cache</h4>
                                    <p>If your application is exclusively using controller based routes, you should take advantage of Laravel's route cache. Using the route cache will drastically decrease the amount of time it takes to register all of your application's routes. In some cases, your route registration may even be up to 100x faster!</p>
                                </div><!--//section-block-->
                            </section><!--//doc-section-->                        
                        </div><!--//content-inner-->
                    </div><!--//doc-content-->
                    <div class="doc-sidebar">
                        <nav id="doc-nav">
                            <ul id="doc-menu" class="nav doc-menu hidden-xs" data-spy="affix">
                                <li><a class="scrollto" href="#events">Events</a></li>
                                <li><a class="scrollto" href="#exceptions">Exceptions</a></li>
                                <li><a class="scrollto" href="#breadcrumbs">Breadcrumbs</a></li>
                                <li><a class="scrollto" href="#composers">Composers</a></li>
                                <li><a class="scrollto" href="#routes">Routes</a></li>
                                <li><a class="scrollto" href="#controllers">Controllers</a></li>
                                <li>
                                    <a class="scrollto" href="#middleware">Middleware</a>
                                    <ul class="nav doc-sub-menu">
                                        <li><a class="scrollto" href="#localization-middleware">LocaleMiddleware</a></li>
                                        <li><a class="scrollto" href="#routeNeedsRole">RouteNeedsRole</a></li>
                                        <li><a class="scrollto" href="#routeNeedsPermission">RouteNeedsPermission</a></li>
                                        <li><a class="scrollto" href="#session-timeout">SessionTimeout</a></li>
                                        <li><a class="scrollto" href="#middleware-groups">Middleware Groups</a></li>
                                    </ul><!--//nav-->
                                </li>
                                <li>
                                    <a class="scrollto" href="#requests">Requests</a>
                                    <ul class="nav doc-sub-menu">
                                        <li><a class="scrollto" href="#example-request">Example Request</a></li>
                                    </ul><!--//nav-->
                                </li>
                                <li>
                                    <a class="scrollto" href="#models">Models</a>
                                    <ul class="nav doc-sub-menu">
                                        <li><a class="scrollto" href="#model-attributes">Attributes</a></li>
                                        <li><a class="scrollto" href="#model-relationships">Relationships</a></li>
                                        <li><a class="scrollto" href="#model-scopes">Scopes</a></li>
                                    </ul><!--//nav-->
                                </li>
                                <li><a class="scrollto" href="#notifications">Notifications</a></li>
                                <li>
                                    <a class="scrollto" href="#providers">Providers</a>
                                    <ul class="nav doc-sub-menu">
                                        <li><a class="scrollto" href="#AccessServiceProvider">AccessServiceProvider</a></li>
                                        <li><a class="scrollto" href="#AppServiceProvider">AppServiceProvider</a></li>
                                        <li><a class="scrollto" href="#BladeServiceProvider">BladeServiceProvider</a></li>
                                        <li><a class="scrollto" href="#ComposerServiceProvider">ComposerServiceProvider</a></li>
                                        <li><a class="scrollto" href="#EventServiceProvider">EventServiceProvider</a></li>
                                        <li><a class="scrollto" href="#HistoryServiceProvider">HistoryServiceProvider</a></li>
                                        <li><a class="scrollto" href="#MacroServiceProvider">MacroServiceProvider</a></li>
                                       <li><a class="scrollto" href="#RouteServiceProvider"> RouteServiceProvider</a></li>
                                    </ul><!--//nav-->
                                </li>
                                <li><a class="scrollto" href="#repositories">Repositories</a></li>
                                <li>
                                    <a class="scrollto" href="#access-control">Access Control</a>
                                    <ul class="nav doc-sub-menu">
                                        <li><a class="scrollto" href="#access-config">Configuration</a></li>
                                        <li><a class="scrollto" href="#access-middleware">Middleware</a></li>
                                        <li><a class="scrollto" href="#create-access-middleware">Custom Middleware</a></li>
                                        <li><a class="scrollto" href="#access-blade-extensions">Blade Extensions</a></li>
                                    </ul><!--//nav-->
                                </li>
                                <li>
                                    <a class="scrollto" href="#history-management">History Management</a>
                                    <ul class="nav doc-sub-menu">
                                        <li><a class="scrollto" href="#history-assets">Assets</a></li>
                                        <li><a class="scrollto" href="#history-render">Rendering</a></li>
                                    </ul><!--//nav-->
                                </li>
                                <li><a class="scrollto" href="#search-stub">Search Stub</a></li>
                                <li><a class="scrollto" href="#blade-extensions">Blade Extensions</a></li>
                                <li><a class="scrollto" href="#localization">Localization</a></li>
                                <li>
                                    <a class="scrollto" href="#helpers">Helpers</a>
                                    <ul class="nav doc-sub-menu">
                                        <li><a class="scrollto" href="#helper-classes">Classes</a></li>
                                        <li><a class="scrollto" href="#helper-globals">Globals</a></li>
                                    </ul><!--//nav-->
                                </li>
                                <li>
                                    <a class="scrollto" href="#resources">Resources</a>
                                    <ul class="nav doc-sub-menu">
                                        <li><a class="scrollto" href="#resources-gulpfile">Gulpfile</a></li>
                                        <li><a class="scrollto" href="#resources-assets">Assets</a></li>
                                        <li><a class="scrollto" href="#resources-lang">Lang</a></li>
                                        <li><a class="scrollto" href="#resources-views">Views</a></li>
                                    </ul><!--//nav-->
                                </li>
                                <li><a class="scrollto" href="#testing">Testing</a></li>
                                <li>
                                    <a class="scrollto" href="#misc">Misc.</a>
                                    <ul class="nav doc-sub-menu">
                                        <li><a class="scrollto" href="#flash-messages">Flash Messages</a></li>
                                        <li><a class="scrollto" href="#magic-methods">Magic Methods</a></li>
                                        <li><a class="scrollto" href="#action-buttons">Action Buttons</a></li>
                                        <li><a class="scrollto" href="#socialite">Socialite</a></li>
                                        <li><a class="scrollto" href="#troubleshooting">Troubleshooting</a></li>
                                        <li><a class="scrollto" href="#deployment">Deployment</a></li>
                                    </ul><!--//nav-->
                                </li>
                            </ul><!--//doc-menu-->
                        </nav>
                    </div><!--//doc-sidebar-->
                </div><!--//doc-body-->              
            </div><!--//container-->
        </div><!--//doc-wrapper-->
        
    </div><!--//page-wrapper-->
    
    <footer class="footer text-center">
        <div class="container">
            <!--/* This template is released under the Creative Commons Attribution 3.0 License. Please keep the attribution link below when using for your own project. Thank you for your support. :) If you'd like to use the template without the attribution, you can check out other license options via our website: themes.3rdwavemedia.com */-->
            <small class="copyright">Designed with <i class="fa fa-heart"></i> by <a href="http://themes.3rdwavemedia.com/" target="_blank">Xiaoying Riley</a> for developers.</small>

            <small class="copyright">Created by <a href="http://www.rappasoft.com" target="_blank">Anthony Rappa</a> and made perfect by an <a href="https://github.com/rappasoft/laravel-5-boilerplate/graphs/contributors" target="_blank">amazing community of people.</a></small>
            
        </div><!--//container-->
    </footer><!--//footer-->
     
    <!-- Main Javascript -->          
    <script type="text/javascript" src="../assets/plugins/jquery-1.12.3.min.js"></script>
    <script type="text/javascript" src="../assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../assets/plugins/prism/prism.js"></script>    
    <script type="text/javascript" src="../assets/plugins/jquery-scrollTo/jquery.scrollTo.min.js"></script>  
    <script type="text/javascript" src="../assets/plugins/lightbox/dist/ekko-lightbox.min.js"></script>
    <script type="text/javascript" src="../assets/plugins/jquery-match-height/jquery.matchHeight-min.js"></script>
    <script type="text/javascript" src="../assets/js/main.js"></script>
</body>
</html> 

